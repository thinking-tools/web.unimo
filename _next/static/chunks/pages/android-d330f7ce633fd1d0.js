(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{3262:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/android",function(){return n(4104)}])},4104:function(e,t,n){"use strict";n.r(t),n.d(t,{crypto:function(){return r},default:function(){return u}});var o,d=n(5893),i=n(9743),a=n(9153),l=n(7294),c=n(8743),s=n.n(c);let r=null===(o=n.g.window)||void 0===o?void 0:o.crypto;function u(){let e,t;let o=(0,i.wI)({data:[]}),c=(0,i.ms)(o);if(!r)try{r=n(2474).webcrypto}catch(e){logger.error("Failed to load webcrypto",e)}let u=!1,p=!1,w=!1,m=null,y=!1,f=(e,n)=>{let d=Date.now();o.data.push({type:e,content:n,timestamp:d,deviceId:t})},g=(e,n)=>{let d=Date.now(),i=o.data.slice().reverse().findIndex(t=>t.type===e);-1===i?o.data.push({type:e,content:n,timestamp:d,deviceId:t}):o.data.splice(i,1,{type:e,content:n,timestamp:d,deviceId:t})},h=()=>{o.data.splice(0,o.data.length)},_=async()=>{if(y)return;y=!0,window.addEntry=f,window.wipe=h,window.updateEntry=g,console.log=e=>{let t=document.createElement("li"),n=document.createTextNode(e);t.appendChild(n),document.getElementById("myList").appendChild(t)},console.error=e=>{let t=document.createElement("li"),n=document.createTextNode(e);t.appendChild(n),t.style.color="red",document.getElementById("myList").appendChild(t)},console.log("login: "+u),console.log("token: "+p),e=new a.XM(c,m,{type:"alias",alias:"#test_public_plain:synapse.nas.s4fu.com"}),await e.initialize(),t=m.getDeviceId(),void 0!==window.Android&&window.Android.onReady();let n=o.data.toJSON();console.log("dump:"+JSON.stringify(n,null,2)),c.on("update",e=>{console.log("update");let t=o.data.toJSON();console.log("dump:"+JSON.stringify(t,null,2)),void 0!==window.Android&&window.Android.update("update",JSON.stringify(t))})};return(0,l.useEffect)(()=>{let e=new URLSearchParams(window.location.search);u=e.get("login"),p=e.get("token"),w=e.get("deviceId"),u&&p&&w&&(m=s().createClient({baseUrl:"https://synapse.nas.s4fu.com",deviceId:w,accessToken:p,userId:"@"+u+":synapse.nas.s4fu.com",isVoipWithNoMediaAllowed:!1}),_().catch(console.error))},[]),(0,d.jsxs)("div",{children:["Android",(0,d.jsx)("ul",{id:"myList"})]})}},2361:function(){},4616:function(){}},function(e){e.O(0,[440,708,714,189,662,479,17,882,774,888,179],function(){return e(e.s=3262)}),_N_E=e.O()}]);