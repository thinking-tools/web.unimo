(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{3262:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/android",function(){return t(4104)}])},4104:function(e,n,t){"use strict";t.r(n),t.d(n,{crypto:function(){return r},default:function(){return u}});var o,d=t(5893),i=t(9743),l=t(9153),a=t(7294),c=t(8743),s=t.n(c);let r=null===(o=t.g.window)||void 0===o?void 0:o.crypto;function u(){let e,n;let o=(0,i.wI)({data:[]}),c=(0,i.ms)(o);if(!r)try{r=t(2474).webcrypto}catch(e){logger.error("Failed to load webcrypto",e)}let u=!1,p=!1,w=!1,f=null,m=!1,y=(e,t)=>{let d=Date.now();o.data.push({type:e,content:t,timestamp:d,deviceId:n})},g=()=>{o.data.splice(0,o.data.length)},h=async()=>{if(m)return;m=!0,window.addEntry=y,window.wipe=g,console.log=e=>{let n=document.createElement("li"),t=document.createTextNode(e);n.appendChild(t),document.getElementById("myList").appendChild(n)},console.error=e=>{let n=document.createElement("li"),t=document.createTextNode(e);n.appendChild(t),n.style.color="red",document.getElementById("myList").appendChild(n)},console.log("login: "+u),console.log("token: "+p),e=new l.XM(c,f,{type:"alias",alias:"#test_public_plain:synapse.nas.s4fu.com"}),await e.initialize(),n=f.getDeviceId(),void 0!==window.Android&&window.Android.onReady();let t=o.data.toJSON();console.log("dump:"+JSON.stringify(t,null,2)),c.on("update",e=>{console.log("update");let n=o.data.toJSON();console.log("dump:"+JSON.stringify(n,null,2)),void 0!==window.Android&&window.Android.update("update",JSON.stringify(n))})};return(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search);u=e.get("login"),p=e.get("token"),w=e.get("deviceId"),u&&p&&w&&(f=s().createClient({baseUrl:"https://synapse.nas.s4fu.com",deviceId:w,accessToken:p,userId:"@"+u+":synapse.nas.s4fu.com",isVoipWithNoMediaAllowed:!1}),h().catch(console.error))},[]),(0,d.jsxs)("div",{children:["Android",(0,d.jsx)("ul",{id:"myList"})]})}},2361:function(){},4616:function(){}},function(e){e.O(0,[440,708,714,189,662,479,17,882,774,888,179],function(){return e(e.s=3262)}),_N_E=e.O()}]);